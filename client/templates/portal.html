<template name="portal">
<div class="container">
{{#if isInRole 'Hospital'}}
<h3>HOSPITAL PORTAL</h3>
<ul class="nav nav-tabs">
  <li class="active"><a data-toggle="tab" href="#accidents">Accidents</a></li>
  <li><a data-toggle="tab" href="#acceptedaccidents">Accepted Accidents</a></li>
</ul>
<div class="tab-content">
   <div id="accidents" class="tab-pane fade in active">
    {{#if accidents.count}}
    	<table class="table">
        <thead>
          <tr>
          <td>Date</td>
          <td>User</td> 
          <td>Accident Address</td>
          <td>PoliceID</td>
          <td>Status</td>
      </tr>
        </thead>
        <tbody>
          {{#each accidents}}
              <tr>
                <td>{{ getAccident.date }}</td>
                <td>{{ getUser}}</td>  
                <td class="accidentlocation">{{ getAccident.location }}</td>
                <td>{{ getPoliceStation.address }}</td>
                <td><button id="accept" type="button" class="ui red basic button {{#if checkstatus}}disabled{{/if}}">{{#if checkstatus}}Accepted{{else}}Accept{{/if}}</button></td>
            </tr>
          {{/each}}
        </tbody>
      </table>
      {{> portalmap}}
    {{else}}
      <h3>No Accidents now</h3>
    {{/if}}
    </div>
    <div id="acceptedaccidents" class="tab-pane fade">
      <table class="table">
        <thead>
          <tr>
          <td>Date</td>
          <td>User</td> 
          <td>Accident Address</td>
          <td>PoliceID</td>
      </tr>
        </thead>
        <tbody>
          {{#each acceptedaccidents}}
              <tr>
                <td>{{ formatDate getAccident.date }}</td>
                <td>{{ getUser}}</td>  
                <td>{{ getAccident.location }}</td>
                <td>{{ getPoliceStation.address }}</td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    </div>
  </div>
{{else}}
{{#if isInRole 'Police'}}
<h3>POLICE PORTAL</h3>
<ul class="nav nav-tabs">
  <li class="active"><a data-toggle="tab" href="#accidents">Accidents</a></li>
</ul>
<div class="tab-content">
   <div id="accidents" class="tab-pane fade in active">
    {{#if allaccidents.count}}
      <table class="ui table">
        <thead>
          <tr>
          <td>Date</td>
          <td>User</td> 
          <td>Accident Address</td>
          <td>Status</td>
          <td>Hospital</td>
      </tr>
        </thead>
        <tbody>
          {{#each allaccidents}}
              <tr>
                <td>{{ getAccident.date }}</td>
                <td>{{ getUser}}</td>  
                <td class="accidentlocation">{{ getAccident.location }}</td>
                <td>{{#if checkstatus}}<button class="ui green basic button">
                Accepted
              </button>
              {{else}}<button class="ui red basic button">
                Pending...
              </button>{{/if}}</td>
                <td>{{ getHospital.address }}</td>
                
            </tr>
          {{/each}}
        </tbody>
      </table>
      {{> portalmap}}
    {{else}}
      <h3>No Accidents now</h3>
    {{/if}}
    </div>
  </div>
{{/if}}
{{/if}}
</div>
</template>


<template name="portalmap">
  {{#if portalMapAllow}}
      <iframe width="100%" height="100%" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.com/maps?q={{lat}},{{longt}}&hl=es;z=17&amp;output=embed"></iframe>
  {{/if}}
</template>